# üõçÔ∏è User Portal ‚Äì React‚Äëfrontend

Detta √§r en React‚Äëapp f√∂r anv√§ndarportal med registrering, inloggning och profilvy. Appen anv√§nder JWT‚Äëtoken som lagras i `localStorage` och HashRouter f√∂r enkel hosting (t.ex. GitHub Pages/Blob Static Website). Efter senaste uppdateringen √§r produktdelen integrerad mot ett Spring Boot‚Äëbaserat ProductService (port 8081) med paginerad listning och skapande av produkter.

## Inneh√•ll
- √ñversikt och funktioner
- Tekniker
- Kom ig√•ng (installation och start)
- Milj√∂variabler och API‚Äëendpoints
- Routing
- Produktfunktioner
- Tillg√§nglighet och UX
- Scripts
- Projektstruktur

## √ñversikt och funktioner
- Skapa konto (registrering)
- Logga in och spara JWT i `localStorage`
- Visa anv√§ndarprofil n√§r token finns
- Logga ut med rensning av token
- V√§xling mellan login/registrering via komponenten `AuthSwitch`
- Header med snabbl√§nk till inloggning samt temav√§xling
- Produktvyer: lista, detaljer och formul√§r f√∂r ny produkt (skapa)

## Tekniker
- React (Create React App)
- react‚Äërouter‚Äëdom v6 med HashRouter
- TypeScript
- Enkel CSS (App.css, Authform.css)

## Kom ig√•ng
1. Installera beroenden:
   npm install
2. S√§tt milj√∂variabler i en `.env` i projektroten vid behov:
   - REACT_APP_PRODUCT_API_BASE_URL=http://localhost:8081
3. Starta utvecklingsserver:
   npm start
4. √ñppna http://localhost:3000

## Milj√∂variabler och API‚Äëendpoints
Anv√§ndartj√§nst (User Service):
- Login: `POST http://localhost:8080/auth/login` (se `src/components/Login/Login.tsx`)
- Appen f√∂rv√§ntar sig `accessToken` i svaret och lagrar den i `localStorage` som `token`.
- Profilendpoints konsumeras fr√•n `UserProfile` (se komponenten) och anv√§nder token i Authorization‚Äëheader.

Produkttj√§nst (Spring Boot ProductService):
- Bas‚ÄëURL: milj√∂variabeln `REACT_APP_PRODUCT_API_BASE_URL` (default: `http://localhost:8081`)
- API‚Äëbasv√§g: `/api/products`
- Swagger UI: `http://localhost:8081/swagger-ui/index.html`
- Endpoints som anv√§nds i frontend:
  - GET `GET {BASE}/api/products?page={page}&size={size}&sortBy={field}&sortDir=asc|desc` ‚Äì paginerad lista (se `ProductList.tsx`)
  - GET `GET {BASE}/api/products/all` ‚Äì h√§mta alla produkter
  - POST `POST {BASE}/api/products` ‚Äì skapa ny produkt (kr√§ver JWT i `Authorization: Bearer <token>`). Se `ProductForm.tsx`.
- St√∂d som saknas i backend i nul√§get (hanteras som stubbar i UI):
  - Uppdatera produkt
  - Ta bort produkt
  - Bilduppladdning (anv√§nd `imageUrls` vid skapande ist√§llet)

S√∂kning i UI sker klient‚Äëside: `productService.searchProducts()` filtrerar namn lokalt tills ett backend‚Äës√∂k finns.

## Routing
All routing sker med HashRouter.
- `#/` ‚Äì
  - Inloggad: visar `UserProfile` och en "Logga ut"‚Äëknapp
  - Utloggad: visar `AuthSwitch` som l√•ter dig v√§xla mellan Registrering och Login
- `#/products` ‚Äì produktlista
- `#/products/:id` ‚Äì produktdetaljer
- `#/admin/products/new` ‚Äì formul√§r f√∂r ny produkt (framtida adminfl√∂de)

Se `src/App.tsx` och `src/components/Header.tsx` f√∂r navigationslogik.

## Produktfunktioner
Koden finns under `src/features/products/`:
- ProductList.tsx ‚Äì lista (anv√§nder paginerat API)
- ProductDetails.tsx ‚Äì detaljer (h√§mtar via client‚Äëside fallback tills GET /{id} finns)
- ProductForm.tsx ‚Äì skapa ny produkt (POST /api/products). Uppdatering ej st√∂dd √§nnu.
- ProductInventory.tsx ‚Äì lager (framtida)
- ProductImageUpload.tsx ‚Äì bilduppladdning (framtida; anv√§nd `imageUrls` tills dess)
- productService.ts ‚Äì konkret integration mot Spring Boot ProductService

## Tillg√§nglighet och UX
- Landm√§rken: `<main role="main">` och semantisk header/footer
- Tydlig knapp f√∂r "Logga ut" som endast visas n√§r token finns
- Textfeedback vid autentiseringsfl√∂den
- Tema‚Äëv√§xling via `ThemeToggle` (i Header)

## Scripts
- `npm start` ‚Äì startar dev‚Äëserver
- `npm run build` ‚Äì bygger produktion
- `npm test` ‚Äì startar testk√∂rning (CRA standard)

## Projektstruktur (utdrag)
- `src/App.tsx` ‚Äì appens rot, routes och villkorad vy baserat p√• token
- `src/components/Header.tsx` ‚Äì titel, navigation, login/logga‚Äëut och tema
- `src/components/AuthSwitch.tsx` ‚Äì v√§xlar mellan Login och Register
- `src/components/Login/Login.tsx` ‚Äì loginfl√∂de mot `/auth/login`
- `src/components/Register.tsx` ‚Äì registreringsfl√∂de
- `src/components/UserProfile.tsx` ‚Äì profilvy f√∂r inloggad anv√§ndare
- `src/features/products/*` ‚Äì produktrelaterade sidor (f√∂rberedda)

## K√§nda begr√§nsningar / Notiser
- Produkt‚Äëuppdatering, borttag och bilduppladdning saknas i backend just nu. UI visar tydliga felmeddelanden om du f√∂rs√∂ker anv√§nda dessa.
- S√∂kning i produktlistan √§r en enkel klient‚Äëside filter i v√§ntan p√• backend‚Äëst√∂d.
- F√∂r att skapa produkter kr√§vs att du √§r inloggad ‚Äì token m√•ste finnas i `localStorage` som `token`.
- HashRouter anv√§nds f√∂r att undvika serverkonfiguration vid statisk hosting.

Senast uppdaterad: 2025-09-03 12:05